<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Việc đang tuyển - CodeDesign</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Full width layout for browse projects page */
        body.browse-projects-page main.page-container {
            max-width: 100%;
            margin: 0;
            padding: 0;
            width: 100%;
        }
        
        body.browse-projects-page .container {
            max-width: 100%;
            width: 100%;
            padding: 0 3rem;
            margin: 0;
        }
        
        body.browse-projects-page .hero {
            width: 100%;
        }
        
        body.browse-projects-page .hero-content {
            max-width: 100%;
            width: 100%;
        }
        
        body.browse-projects-page .section {
            padding: 2rem 0;
            width: 100%;
        }
        
        body.browse-projects-page .section > .container {
            width: 100%;
        }
        
        body.browse-projects-page .project-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2rem;
            width: 100%;
        }
        
        /* Larger screens - more columns */
        @media (min-width: 1600px) {
            body.browse-projects-page .project-list {
                grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
            }
        }
        
        @media (min-width: 1920px) {
            body.browse-projects-page .project-list {
                grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            }
        }
        
        /* Medium screens */
        @media (max-width: 1200px) {
            body.browse-projects-page .project-list {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }
        }
        
        /* Mobile screens */
        @media (max-width: 768px) {
            body.browse-projects-page .container {
                padding: 0 1.5rem;
            }
            
            body.browse-projects-page .project-list {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }
        
        /* Search bar - shorter width, centered */
        body.browse-projects-page .search-bar-large {
            max-width: 600px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Filter container - shorter width, centered, single row */
        body.browse-projects-page .filter-container {
            max-width: 600px;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            flex-wrap: nowrap;
            display: flex;
            gap: 0.75rem;
        }
        
        body.browse-projects-page .filter-container .filter-input,
        body.browse-projects-page .filter-container .filter-select {
            flex: 1;
            min-width: 0;
        }
        
        /* On smaller screens, allow wrapping */
        @media (max-width: 768px) {
            body.browse-projects-page .filter-container {
                flex-wrap: wrap;
            }
            
            body.browse-projects-page .filter-container .filter-input,
            body.browse-projects-page .filter-container .filter-select {
                flex: 1 1 100%;
                min-width: 100%;
            }
        }
    </style>
</head>
<body class="browse-projects-page">
    <div id="navbar-root"></div>

    <main class="page-container">
        <section class="hero hero--compact">
            <div class="container">
                <div class="hero-content">
                    <p class="eyebrow">Freelancer Hub</p>
                    <h1 class="hero-title">Tìm việc phù hợp với kỹ năng của bạn</h1>
                    <p class="hero-subtitle">
                        Chỉ hiển thị các dự án đã được duyệt và đang mở nhận hồ sơ. Lọc theo kỹ năng, ngân sách, 
                        và tìm kiếm theo từ khóa để chọn việc nhanh hơn.
                    </p>

                    <div class="search-bar-large">
                        <input type="text" id="projectSearchInput" placeholder="Tìm theo tiêu đề, mô tả...">
                        <button class="btn btn-primary" id="projectSearchButton">
                            <i class="fas fa-search"></i> Tìm việc
                        </button>
                    </div>

                    <div class="filter-container">
                        <input type="text" id="skillsFilter" class="filter-input" placeholder="Kỹ năng (ví dụ: React, UI/UX)">
                        <select id="budgetFilter" class="filter-select">
                            <option value="all">Ngân sách (Tất cả)</option>
                            <option value="low">Dưới 10 triệu</option>
                            <option value="mid">10 - 50 triệu</option>
                            <option value="high">Trên 50 triệu</option>
                        </select>
                        <select id="budgetTypeFilter" class="filter-select">
                            <option value="all">Loại ngân sách</option>
                            <option value="FIXED">Trọn gói</option>
                            <option value="HOURLY">Theo giờ</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Dự án đang mở</h2>
                        <p class="section-subtitle">Chỉ hiển thị trạng thái OPEN từ hệ thống</p>
                    </div>
                    <div id="projectCount" class="section-subtitle"></div>
                </div>
                <div id="projectsList" class="project-list">
                    <div class="empty-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Đang tải dự án...</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>CodeDesign</h3>
                <p>Không gian dành riêng cho freelancer tìm việc chất lượng.</p>
            </div>
            <div class="footer-section">
                <h4>Công cụ nhanh</h4>
                <a href="browse_projects.html">Việc đang mở</a>
                <a href="orders.html">Đơn hàng của tôi</a>
                <a href="freelancer_profile.html">Hồ sơ cá nhân</a>
            </div>
            <div class="footer-section">
                <h4>Hỗ trợ</h4>
                <a href="messages.html">Liên hệ hỗ trợ</a>
                <a href="notifications.html">Thông báo hệ thống</a>
            </div>
        </div>
    </footer>

    <div id="bidModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>Nộp thầu dự án</h2>
                <button class="modal-close" id="closeBidModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="bidProjectInfo" class="bid-project-info">
                    </div>
                
                <form id="bidForm">
                    <input type="hidden" id="bidProjectId">
                    <input type="hidden" id="bidProjectDeadline">
                    <div class="form-group">
                        <label for="bidPrice">Tổng giá trị thầu (VND) *</label>
                        <input type="number" id="bidPrice" name="price" min="0" step="1000" required placeholder="Nhập tổng số tiền bạn muốn nhận">
                    </div>
                    
                    <div class="form-group">
                        <label for="milestoneCount">Kế hoạch triển khai (Chia giai đoạn)</label>
                        <select id="milestoneCount" class="form-control" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="1">1 Giai đoạn (Làm xong nhận hết)</option>
                            <option value="2">2 Giai đoạn (50% - 50%)</option>
                            <option value="3">3 Giai đoạn (Chia đều)</option>
                            <option value="4">4 Giai đoạn</option>
                        </select>
                        <small class="form-help">Hệ thống sẽ tự động chia nhỏ công việc và nhắc khách hàng nạp tiền trước mỗi giai đoạn.</small>
                    </div>

                    <div id="milestoneContainer" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e9ecef;">
                        </div>

                    <div class="form-group">
                        <label for="bidCoverLetter">Thư ngỏ (Cover Letter) *</label>
                        <textarea id="bidCoverLetter" name="cover_letter" rows="4" required placeholder="Tại sao bạn phù hợp với dự án này?"></textarea>
                        <small class="form-help">Hãy viết một thư ngỏ thuyết phục để tăng cơ hội được chọn</small>
                    </div>

                    <div id="bidErrorMessage" class="error-message" style="display: none; color: var(--danger-color); margin-bottom: 1rem;"></div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBidBtn">Hủy</button>
                        <button type="submit" class="btn btn-primary" id="submitBidBtn">
                            <i class="fas fa-paper-plane"></i> Gửi Thầu
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/projects.js"></script>
    <script src="js/browse_projects.js"></script>
</body>
</html>